<!DOCTYPE html>
<html lang="zxx">

<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0" />
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/font-awesome.min.css">
    <link href="css/animate.css" rel="stylesheet">
    <link href="css/icofont.css" rel="stylesheet" type="text/css">
    <link href="css/swiper.css" rel="stylesheet" type="text/css">
    <link href="css/owl.carousel.min.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet" type="text/css">
    <link href="css/responsive.css" rel="stylesheet" type="text/css">
    <link href="css/magnific-popup.css" rel="stylesheet">
    <link rel="stylesheet" href="css/bootstrapDatepickr-1.0.0.css">
    <link rel="stylesheet" href="css/selectStyle.css">
    <title>Fitaza</title>
    <!--================ Our header Section =================-->
</head>

<body>
    <header class="header1">
        <div class="header-top">
            <div class="container">
                <div class="header_top_inner">
                    <div class="pull-left">
                        <a href=""><i class="fa fa-phone"></i>+(1800) 5683248</a>
                        <a href="#"><i class="fa fa-envelope-o"></i>info@fitaza.com</a>
                        <a><i class="fa fa-clock-o"></i>Mon-Sat: 9 am to 5 pm </a>
                    </div>
                    <div class="pull-right">
                        <ul class="header_social">
                            <li><a href="#" target="_blank"><i class="fa fa-facebook"></i></a></li>
                            <li><a href="#" target="_blank"><i class="fa fa-linkedin"></i></a></li>
                            <li><a href="#" target="_blank"><i class="fa fa-twitter"></i></a></li>
                            <li><a href="#" target="_blank"><i class="fa fa-instagram"></i></a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div class="tt-header logo-switch">
            <div class="container">
               <div class="toggle-block">
                  <div class="toggle-block-container">
                     <nav class="main-nav clearfix">
                        <ul>
                           <li class="parent">
                              <a href="index-5.html"><span>首页</span></a>
                           </li>
                           <li class="parent">
                              <a href="about.html"><span>关于我们</span></a>
                           </li>
                           <li class="parent">
                              <a href="classes.html"><span>健身计划<i class="menu-toggle fa fa-angle-down"></i></span></a>
                              <ul>
                                 <li><a href="runing-fitness.html"><span>乐跑课程</span></a></li>
                                 <li><a href="weight-lifting.html"><span>举重课程</span></a></li>
                                 <li><a href="organic-yoga.html"><span>优雅瑜伽</span></a></li>
                                 <li><a href="body-building.html"><span>身体塑形课</span></a></li>
                                 <li><a href="raw-fitness.html"><span>Raw Fitness课程</span></a></li>
                                 <li><a href="body-combact.html"><span>Body Combat课程</span></a></li>
                                 <li><a href="strength-training.html"><span>力量训练</span></a></li>
                                 <li><a href="power-yoga.html"><span>力量瑜伽</span></a></li>
                                 <li><a href="pilates-fitness.html"><span>普拉提课程</span></a></li>
                              </ul>
                           </li>
                           <li class="parent">
                              <a href="#"><span>食谱推荐</span></a>
                           </li>
                           <li class="parent">
                              <a href="#"><span>健康贴士</span></a>
                           </li>
                           <li>
                              <a href="contactus.html"><span>饮食地图</span></a>
                           </li>
                           <li>
                              <a href="contactus.html"><span>智能客服</span></a>
                           </li>
                           <li>
                              <a class="-mob-share-open" href="javascript:;"><span>分享 </span><i class="fa fa-share-alt"
                                    aria-hidden="true"></i></a>
                              <div class="-mob-share-ui" style="display: none">
                                 <ul class="-mob-share-list">
                                    <li class="-mob-share-weibo">
                                       <p>新浪微博</p>
                                    </li>
                                    <li class="-mob-share-qzone">
                                       <p>QQ空间</p>
                                    </li>
                                    <li class="-mob-share-qq">
                                       <p>QQ好友</p>
                                    </li>
                                    <li class="-mob-share-douban">
                                       <p>豆瓣</p>
                                    </li>
                                    <li class="-mob-share-facebook">
                                       <p>Facebook</p>
                                    </li>
                                    <li class="-mob-share-twitter">
                                       <p>Twitter</p>
                                    </li>
                                 </ul>
                                 <div class="-mob-share-close">取消</div>
                              </div>
                              <div class="-mob-share-ui-bg"></div>
                           </li>
                           <li>
                              <!-- <a href="login-page.html"><span>登录</span></a> -->
                              <a data-toggle="modal" data-target="#login" href="">登录<span
                                    class="glyphicon glyphicon-log-in"></span></a>
                           </li>
                        </ul>
                     </nav>
                  </div>
               </div>
            </div>
         </div>
    </header>
    <!--================ Our header Section end from hear=================-->
    <!--================ Our banner Section =================-->

    <div class="banner">
        <div class="container">
            <div class="row">
                <h1 class="banner_title">个人中心</h1>
                <div class="breadcrumb">
                    <ul>
                        <li><a href="index-5.html">主页</a></li>
                        <li><i class="fa fa-angle-right" aria-hidden="true"></i></li>
                        <li><a href="personal-center.html">个人中心</a></li>
                        <li><i class="fa fa-angle-right" aria-hidden="true"></i></li>
                        <li class="active"><a href="records.html">我的饮食数据</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <!--================ Our banner Section end =================-->
    <!--================ Welcome To Class Description=================-->
    <div class="main-services">
        <div class="cellpadding service_details">
            <div class="container">
                <div class="row">
                    <div class="col-sm-12 col-md-3 col-md-push-8 col-lg-3 col-lg-push-9 sub_classes">
                        <aside class="blogAside">
                            <ul class="categoryList normall">
                                <li><a href="personal-center.html">基本信息<i class="fa fa-angle-right"
                                            aria-hidden="true"></i></a></li>
                                <li class="activeCat"><a href="records.html">我的饮食数据<i class="fa fa-angle-right"
                                            aria-hidden="true"></i></a></li>
                                <li><a href="fitness-plan.html">我的健身计划<i class="fa fa-angle-right"
                                            aria-hidden="true"></i></a></li>
                            </ul>
                        </aside>
                    </div>
                    <div class="col-sm-12 col-md-9 main-sarvices">
                        <!-- <h4 class="tt-title h4 yellow text-center ">卡路里摄入曲线</h4> -->
                        <div id="container" style="min-width:400px;height:400px"></div>
                        <!-- <div class="form-group Message top_bottom">
                            <textarea class="form-control" id="comment" name="comment"
                                placeholder="Write Comment"></textarea>
                        </div> -->
                        <div class="f-buton">
                            <div class="row">
                                <div class="col-md-12 col-sm-12 five-haadings">
                                    <div class="contact_us2_form House_Renovation_form roofing_form">
                                        <div class="row">
                                            <div class="col-md-4 col-md-offset-4 col-lg-offset-4col-xl-offset-4">
                                                <div class="input-group">
                                                    <span class="input-group-addon" id="basic-addon1"><i
                                                            class="fa fa-calendar"></i></span>
                                                    <input type="text" id="calendar" placeholder="2019 12 14"
                                                        class="form-control">
                                                </div>
                                            </div>
                                        </div>
                                        </br>
                                        <div class="empty-space lg-15 sm-15 xs-15"></div>
                                        <h4 class="tt-title h4 yellow text-center ">今日记录</h4>
                                        <div class="empty-space lg-15 sm-15 xs-15"></div>
                                        <form id="leaveComment">
                                            <div>
                                                <div class="row">
                                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                                        <div class="form-group top_bottom">
                                                            <label for=""> 早餐:</label>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                                        <div class="form-group top_bottom">
                                                            <br />
                                                            <br />
                                                            <select multiple data-placeholder="" id="breakfast">
                                                                <option>米饭</option>
                                                                <option>面条</option>
                                                                <option>面包</option>
                                                                <option>鸡蛋</option>
                                                                <option>牛奶</option>
                                                                <option>苹果</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div>
                                                <div class="row">
                                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                                        <div class="form-group top_bottom">
                                                            <label for=""> 午餐:</label>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                                        <div class="form-group top_bottom">
                                                            <br />
                                                            <br />
                                                            <select multiple data-placeholder="" id="lunch">
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div>
                                                <div class="row">
                                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                                        <div class="form-group top_bottom">
                                                            <label for=""> 晚餐:</label>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                                        <div class="form-group top_bottom">
                                                            <br />
                                                            <br />
                                                            <select multiple data-placeholder="" id="dinner">
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div>
                                                <div class="row">
                                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                                        <div class="form-group top_bottom">
                                                            <label for=""> 加餐:</label>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                                        <div class="form-group top_bottom">
                                                            <br />
                                                            <br />
                                                            <select multiple data-placeholder="" id="extraFood">
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="row">
                                                <div class="breadcrumb pull-right">
                                                    <ul>
                                                        <li><a href="blog-lefttsidebar.html">获取21天减肥食谱>></a></li>
                                                    </ul>
                                                </div>
                                            </div>

                                            <button type="button" name="leaveComment" id="edit"
                                                class="btn sim-button button8 pull-right">
                                                <span>上传修改</span>
                                            </button>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>




    </div>
    <div class="tz-newsletter tz-newsletter-type-1">
        <div class="container">
            <div class="row">
                <div class="newsletter-left col-md-6">
                    <div class="news-icon">
                        <i class="fa fa-paper-plane"></i>
                    </div>
                    <div class="news-content">
                        <h3 class="new-title">
                            Subscribe our newsletter
                        </h3>
                        <p>Register now! We will send you best offers for your trip. </p>
                    </div>
                </div>
                <div class="newsletter-right col-md-6">
                    <form class="newsletter">
                        <div class="tnp-field tnp-field-email"><label>email</label>
                            <input class="tnp-email" type="email" name="ne" value="" placeholder="Enter Your Email"
                                required>
                            <button type="submit"
                                class="btn btn-success sim-button button8 btn-effect "><span>Submit</span></button>
                        </div>
                        <div class="tnp-field tnp-field-button">
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <!--================ Our footer Section start=================-->
    <footer class="xyz">
        <div class="footer cellpadding">
            <div class="container">
                <div class="row">
                    <div class="t-footer">
                        <div class="col-sm-4 col-sm-4">
                            <div class="t-footer">
                                <img src="images/footer-logo.png" class="img-responsive" alt="" title="footer-logo">
                                <p>Lorem ipsum dolor sit amet, consectetuer
                                    adipiscing elit. Aenean commodo ligula eget
                                    dolor. Aenean massa.
                                </p>
                                <div class="contact">
                                    <h4><i class="fa fa-phone"></i> 1(123) 456-7890</h4>
                                    <h4><i class="fa fa-map-marker"></i> San Diego City, US</h4>
                                    <h4> <i class="fa fa-clock-o"></i> Mon - Sat 9.00 - 17.00</h4>
                                </div>
                            </div>
                            <!--t-footer-->
                        </div>
                        <!--col-->
                        <div class="col-sm-4 col-sm-4">
                            <div class="t-footer">
                                <h2>Useful Links</h2>
                                <ul class="tt-footer-list">
                                    <li><a href="index.html">Home</a></li>
                                    <li><a href="about.html">About Us</a></li>
                                    <li><a href="faq.html">Faq</a></li>
                                    <li><a href="appointment.html">Appointment</a></li>
                                    <li><a href="contactus.html">Contact Us</a></li>
                                </ul>
                            </div>
                            <!--t-footer-->
                        </div>
                        <!--col-->
                        <div class="col-sm-4 col-sm-4">
                            <div class="t-footer">
                                <h2 class="last">Opening Hours</h2>
                                <div class="Monday ">
                                    <h5>Monday <span>8:00 AM - 4:00 PM</span></h5>
                                    <h5>Wednesday<span>8:00 AM - 4:00 PM</span></h5>
                                    <h5>Friday <span>8:00 AM - 4:00 PM</span></h5>
                                    <h5>Saturday <span>9:00 AM - 3:00 PM</span></h5>
                                    <h5>Sunday <span>closed</span></h5>
                                </div>
                            </div>
                            <!--t-footer-->
                        </div>
                        <!--col-->
                    </div>
                    <!--row-->
                </div>
                <!--t-footer-->
            </div>
            <!--container-->
        </div>
        <!--footer-->
        <!--================ Our footer Section start=================-->
        <!--================ Our bottom footer Section start=================-->
        <div class="footer-bottom">
            <div class="container">
                <div class="row">
                    <div class="col-sm-6 col-sd-6 col-xs-12">
                        <div class="tt-copy-left">
                            Copyright © Fitaza 2019. All rights reserved.
                        </div>
                    </div>
                    <div class="col-sm-6 col-xs-12">
                        <div class="tt-copy-right">
                            <p> Created by: &nbsp;<a href="http://www.bootstrapmb.com/">ThemeChampion</a></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- Back To Top Start -->
    <a id="mkdf-back-to-top" href="#" class="off"><i class="fa fa-chevron-up"></i></a>
    <!-- Back To Top End -->

    <!--================ Our bottom footer Section end=================-->
    <script src="js/jquery.min.js"></script>
    <script src="js/jquery.shuffle.min.js"></script>
    <script src="js/custom.js"></script>
    <script src="js/global.js"></script>
    <script src="js/swiper.jquery.min.js"></script>
    <script src="js/owl.carousel.min.js"></script>
    <script src="js/jquery.magnific-popup.min.js"></script>
    <script src="js/jquery.barfiller.js"></script>
    <script src="js/bootstrapDatepickr-1.0.0.min.js"></script>
    <script src="js/select.js"></script>
    <script src="https://code.highcharts.com.cn/highcharts/highcharts.js"></script>
    <script src="https://code.highcharts.com.cn/highcharts/modules/exporting.js"></script>
    <script src="https://code.highcharts.com.cn/highcharts/modules/oldie.js"></script>
    <script src="https://code.highcharts.com.cn/highcharts-plugins/highcharts-zh_CN.js"></script>

    <script>
        var url1 = "http://localhost:8011/alldailyfood";

        var breakfastData = "[";
        var lunchData = "[";
        var dinnerData = "[";
        var otherData = "[";
        var dateDataList = [];
        var breakfastDataList = [];
        var lunchDataList = [];
        var dinnerDataList = [];
        var otherDataList = [];
        $.ajax({
            type: "get",
            url: url1,
            success: function (data) {
                console.log(data);
                for (var i = 0; i < data.length; i++) {
                    dateDataList.push(data[i].year + "-" + data[i].month + "-" + data[i].day);
                    breakfastDataList.push(data[i].breakfastCa);
                    lunchDataList.push(data[i].lunchCa);
                    dinnerDataList.push(data[i].dinnerCa);
                    otherDataList.push(data[i].othersCa);
                }

                Highcharts.chart('container', {
                    chart: {
                        type: 'line'
                    },
                    title: {
                        text: '卡路里摄入曲线'
                    },
                    xAxis: {
                        categories: dateDataList
                    },
                    yAxis: {
                        title: {
                            text: '卡路里 (Kcal)'
                        }
                    },
                    plotOptions: {
                        line: {
                            dataLabels: {
                                // 开启数据标签
                                enabled: true
                            },
                            // 关闭鼠标跟踪，对应的提示框、点击事件会失效
                            enableMouseTracking: false
                        }
                    },
                    series: [{
                        name: '早餐',
                        data: breakfastDataList
                    }, {
                        name: '中餐',
                        data: lunchDataList
                    }, {
                        name: '晚餐',
                        data: dinnerDataList
                    }, {
                        name: '加餐',
                        data: otherDataList
                    }]
                });
                chart1.xAxis.setData(JSON.parse('{"categories:"' + '"[12,15]"' + '},'));

                // breakfastData += '{"name":' + '"早餐"' + ',"data"":' + browsingBuildingNameMap.get(data[key].name) + "},";
                // lunchData += '{"name":' + '"中餐"' + ',"data":' + browsingBuildingAddressMap.get(address) + "},";
                // dinnerData += '{"name":' + '"晚餐"' + ',"data":' + browsingBuildingAreaMap.get(data[key].floorsSpace) + "},";
                // otherData += '{"name":' + '"加餐"' + ',"data":' + browsingBuildingTotalPriceMap.get(data[key].price) + "},";

                // browsingBuildingNameData = browsingBuildingNameData.substring(0, browsingBuildingNameData.length - 1) + "]";
                // browsingBuildingAddressData = browsingBuildingAddressData.substring(0, browsingBuildingAddressData.length - 1) + "]";
                // browsingBuildingAreaData = browsingBuildingAreaData.substring(0, browsingBuildingAreaData.length - 1) + "]";
                // browsingBuildingTotalPriceData = browsingBuildingTotalPriceData.substring(0, browsingBuildingTotalPriceData.length - 1) + "]";
                // chart1.series[0].setData(JSON.parse(breakfastData));
                // chart1.series[1].setData(JSON.parse(lunchData));
                // chart1.series[2].setData(JSON.parse(dinnerData));
                // chart1.series[3].setData(JSON.parse(otherData));
            },
            error: function () {
                console.log("error");
            }
        });

    //     var chart1 = Highcharts.chart('container', {
    //     chart: {
    //         type: 'line'
    //     },
    //     title: {
    //         text: '卡路里摄入曲线'
    //     },
    //     xAxis: {
    //         categories: ['一月', '二月', '三月', '四月', '五月', '六月', '七月', '八月', '九月', '十月', '十一月', '十二月']
    //     },
    //     yAxis: {
    //         title: {
    //             text: '卡路里 (Kcal)'
    //         }
    //     },
    //     plotOptions: {
    //         line: {
    //             dataLabels: {
    //                 // 开启数据标签
    //                 enabled: true          
    //             },
    //             // 关闭鼠标跟踪，对应的提示框、点击事件会失效
    //             enableMouseTracking: false
    //         }
    //     },
    //     series: [{
    //         name: '东京',
    //         data: [7.0, 6.9, 9.5, 14.5, 18.4, 21.5, 25.2, 50, 23.3, 18.3, 13.9, 9.6]
    //     }, {
    //         name: '伦敦',
    //         data: [3.9, 4.2, 5.7, 8.5, 11.9, 15.2, 17.0, 16.6, 14.2, 10.3, 6.6, 4.8]
    //     }]
    // });


    </script>
    <script>
        //获取全局的数据
        var dish = window.sessionStorage.getItem('newDish');

        //用于保存选择的日期
        var selectedDate = "20191214";

        //用于存储具体的小时
        var hour;

        //用于存储是哪一餐
        var dishTime;

        //存储全局url
        var hostURL = ""
        $.getJSON("./url.json", function (data) {
            hostURL = data.url
        });

        //四个数组用于保存每餐吃的是什么
        var breakfastArr = new Array()
        var lunchArr = new Array()
        var dinnerArr = new Array()
        var extraFoodArr = new Array()

        //要等页面渲染完之后才能进行的操作
        $(document).ready(function () {
            $("#calendar").bootstrapDatepickr();
            $("#calendar1").bootstrapDatepickr({ date_format: "d-m-Y" });
            $("#calendar2").bootstrapDatepickr({ date_format: "l, do F Y" });


            hour = new Date().getHours()
            
            if(hour >=5 && hour <= 12){
                dishTime = "breakfast";
                breakfastArr.push(dish);
            }else if(hour >= 12 && hour <= 14){
                dishTime = "lunch";
                lunchArr.push(dish)
            }else if(hour >= 17 && hour <= 20){
                dishTime = "dinner";
                dinnerArr.push(dish)
            }else{
                dishTime = "extraFood"
                extraFoodArr.push(dish)
            }

            //页面跳转时加入新的饮食
            var selectElement = $("#"+dishTime).parent().parent().parent()
            var a = $('<a />').addClass('notShown').html('<em>' + dish + '</em><i></i>').addClass("shown").appendTo(selectElement.children('div'))
            selectElement.children('div').children('span').addClass('hide');
            selectElement.find('option:contains(' + dish + ')').prop('selected', true);
        });



    </script>
    <script>
        //上传新的修改
        $('#edit').click(function () {
            console.log("点击成功");
            var data = {};
            data['date'] = selectedDate;
            data['breakfast'] = breakfastArr;
            data['lunch'] = lunchArr;
            data['dinner'] = dinnerArr;
            data['others'] = extraFoodArr;
            console.log(data)
            var jsonData = JSON.stringify(data);
            console.log(jsonData)
            $.ajax({
                type: "post",
                url: hostURL + "/adddailyfood",
                async: false,
                dataType: 'json',
                contentType: "application/json",
                data: jsonData,
                success: function (data) {
                    alert("数据发送成功");
                },
                error: function () {
                    console.log("数据发送不成功")
                }
            });
        }); 
    </script>

</body>

</html>